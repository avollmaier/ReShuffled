<?xml version="1.0" encoding="UTF-8"?>

<ClassDiagram name="Multi-file class diagram">
  <ClassDiagramComponents>
    <Class name="ReshuffledMainboardSimulator" package="serial.sim" visibility="public" xPosition="20.0" yPosition="20.0">
      <Fields>
        <Field name="LOG" type="Logger" visibility="private" isStatic="true" isFinal="true"/>
        <Field name="in" type="InputStream" visibility="private" isFinal="true"/>
        <Field name="out" type="BufferedWriter" visibility="private" isFinal="true"/>
      </Fields>
      <Constructors>
        <Constructor visibility="public">
          <Argument type="InputStream" name="in"/>
          <Argument type="OutputStream" name="out"/>
        </Constructor>
      </Constructors>
      <Methods>
        <Method name="run" returnType="void" visibility="public"/>
      </Methods>
    </Class>
    <Class name="SimOutputStreamBuffer" package="serial.sim" visibility="public" xPosition="320.0" yPosition="20.0">
      <Fields>
        <Field name="pis" type="PipedInputStream" visibility="private" isFinal="true"/>
        <Field name="pos" type="PipedOutputStream" visibility="private" isFinal="true"/>
      </Fields>
      <Constructors>
        <Constructor visibility="public"/>
      </Constructors>
      <Methods>
        <Method name="read" returnType="int" visibility="public"/>
        <Method name="write" returnType="void" visibility="public">
          <Argument type="int" name="b"/>
        </Method>
        <Method name="available" returnType="int" visibility="public"/>
      </Methods>
    </Class>
    <Class name="SimInputStreamBuffer" package="serial.sim" visibility="public" xPosition="620.0" yPosition="20.0">
      <Fields>
        <Field name="blocking" type="boolean" visibility="private" isFinal="true"/>
        <Field name="pis" type="PipedInputStream" visibility="private" isFinal="true"/>
        <Field name="pos" type="PipedOutputStream" visibility="private" isFinal="true"/>
      </Fields>
      <Constructors>
        <Constructor visibility="public"/>
      </Constructors>
      <Methods>
        <Method name="read" returnType="int" visibility="public"/>
        <Method name="write" returnType="void" visibility="public">
          <Argument type="int" name="b"/>
        </Method>
        <Method name="available" returnType="int" visibility="public"/>
      </Methods>
    </Class>
    <Class name="Response" package="serial.request" visibility="public" xPosition="920.0" yPosition="20.0">
      <Fields>
        <Field name="timeMillisCreatedAt" type="long" visibility="private" isFinal="true"/>
        <Field name="resFrame" type="byte[]" visibility="private" isFinal="true"/>
      </Fields>
      <Constructors>
        <Constructor visibility="public">
          <Argument type="byte[]" name="resFrame"/>
        </Constructor>
      </Constructors>
      <Methods>
        <Method name="getResFrame" returnType="byte[]" visibility="public"/>
        <Method name="getTimeMillisCreatedAt" returnType="long" visibility="public"/>
      </Methods>
    </Class>
    <Class name="RequestShutdown" package="serial.request" visibility="public" xPosition="1220.0" yPosition="20.0">
      <Fields/>
      <Constructors>
        <Constructor visibility="public"/>
      </Constructors>
      <Methods>
        <Method name="toString" returnType="String" visibility="public"/>
      </Methods>
    </Class>
    <Class name="RequestShuffle" package="serial.request" visibility="public" xPosition="1520.0" yPosition="20.0">
      <Fields/>
      <Constructors>
        <Constructor visibility="public"/>
      </Constructors>
      <Methods>
        <Method name="toString" returnType="String" visibility="public"/>
      </Methods>
    </Class>
    <Class name="RequestInit" package="serial.request" visibility="public" xPosition="1820.0" yPosition="20.0">
      <Fields/>
      <Constructors>
        <Constructor visibility="public"/>
      </Constructors>
      <Methods>
        <Method name="toString" returnType="String" visibility="public"/>
      </Methods>
    </Class>
    <Class name="RequestDeal" package="serial.request" visibility="public" xPosition="2120.0" yPosition="20.0">
      <Fields/>
      <Constructors>
        <Constructor visibility="public">
          <Argument type="int" name="value"/>
        </Constructor>
      </Constructors>
      <Methods>
        <Method name="toString" returnType="String" visibility="public"/>
      </Methods>
    </Class>
    <Class name="RequestAutoDeal" package="serial.request" visibility="public" xPosition="20.0" yPosition="420.0">
      <Fields/>
      <Constructors>
        <Constructor visibility="public">
          <Argument type="int" name="value"/>
        </Constructor>
      </Constructors>
      <Methods>
        <Method name="toString" returnType="String" visibility="public"/>
      </Methods>
    </Class>
    <Class name="Request" package="serial.request" visibility="public" isAbstract="true" xPosition="320.0" yPosition="420.0">
      <Fields>
        <Field name="LOG" type="Logger" visibility="private" isStatic="true" isFinal="true"/>
        <Field name="CRC32" type="java.util.zip.CRC32" visibility="private" isStatic="true" isFinal="true"/>
        <Field name="DATAFORMATTER" type="DateFormat" visibility="private" isStatic="true" isFinal="true"/>
        <Field name="reqFrame" type="String" visibility="private"/>
        <Field name="timeMillisCreatedAt" type="long" visibility="private" isFinal="true"/>
        <Field name="timeMillisFrameSent" type="long" visibility="private"/>
        <Field name="resFrame" type="byte[]" visibility="private"/>
        <Field name="timeMillisFrameReceived" type="long" visibility="private"/>
      </Fields>
      <Constructors>
        <Constructor visibility="public"/>
      </Constructors>
      <Methods>
        <Method name="handleRequestSent" returnType="void" visibility="public"/>
        <Method name="handleResponse" returnType="void" visibility="public">
          <Argument type="Response" name="res"/>
        </Method>
        <Method name="createRequestFrame" returnType="void" visibility="protected">
          <Argument type="String" name="content"/>
        </Method>
        <Method name="getMreqFrame" returnType="String" visibility="public"/>
        <Method name="toString" returnType="String" visibility="public"/>
        <Method name="getTimeMillisCreatedAt" returnType="long" visibility="public"/>
        <Method name="getTimeMillisFrameSent" returnType="long" visibility="public"/>
        <Method name="getTimeMillisFrameReceived" returnType="long" visibility="public"/>
      </Methods>
    </Class>
    <Class name="Communication" package="serial" visibility="public" xPosition="620.0" yPosition="420.0">
      <Fields>
        <Field name="LOG" type="Logger" visibility="private" isStatic="true" isFinal="true"/>
        <Field name="instance" type="Communication" visibility="private" isStatic="true"/>
        <Field name="serial" type="Serial" visibility="private" isFinal="true"/>
        <Field name="communicationSendThread" type="Thread" visibility="private" isFinal="true"/>
        <Field name="communicationReceiveThread" type="Thread" visibility="private" isFinal="true"/>
        <Field name="toSentList" type="LinkedList&lt;Request&gt;" visibility="private" isFinal="true"/>
        <Field name="responseList" type="LinkedList&lt;Response&gt;" visibility="private" isFinal="true"/>
        <Field name="pendingRequest" type="Request" visibility="private"/>
        <Field name="timeoutMillis" type="long" visibility="private" isFinal="true"/>
        <Field name="maxReceiveFrameLength" type="int" visibility="private" isFinal="true"/>
      </Fields>
      <Constructors>
        <Constructor visibility="private">
          <Argument type="Serial" name="serial"/>
        </Constructor>
      </Constructors>
      <Methods>
        <Method name="createInstance" returnType="Communication" visibility="public" isStatic="true">
          <Argument type="Serial" name="serial"/>
        </Method>
        <Method name="getInstance" returnType="Communication" visibility="public" isStatic="true"/>
        <Method name="shutdown" returnType="void" visibility="public"/>
        <Method name="sendRequestExecutor" returnType="void" visibility="public">
          <Argument type="Request" name="req"/>
        </Method>
      </Methods>
    </Class>
    <Class name="Serial" package="serial" visibility="public" xPosition="920.0" yPosition="420.0">
      <Fields>
        <Field name="LOG" type="Logger" visibility="private" isStatic="true" isFinal="true"/>
        <Field name="instance" type="Serial" visibility="private" isStatic="true"/>
        <Field name="config" type="ConfigSerialModel" visibility="private" isFinal="true"/>
        <Field name="inputStream" type="InputStream" visibility="private"/>
        <Field name="outputStream" type="OutputStream" visibility="private"/>
        <Field name="toSim" type="SimInputStreamBuffer" visibility="private"/>
        <Field name="fromSim" type="SimOutputStreamBuffer" visibility="private"/>
      </Fields>
      <Constructors>
        <Constructor visibility="private">
          <Argument type="ConfigSerialModel" name="config"/>
        </Constructor>
      </Constructors>
      <Methods>
        <Method name="createInstance" returnType="Serial" visibility="public" isStatic="true">
          <Argument type="ConfigSerialModel" name="config"/>
        </Method>
        <Method name="getInstance" returnType="Serial" visibility="public" isStatic="true"/>
        <Method name="getInputStream" returnType="InputStream" visibility="public"/>
        <Method name="getOutputStream" returnType="OutputStream" visibility="public"/>
        <Method name="initSimulation" returnType="void" visibility="private"/>
        <Method name="initSerialDevice" returnType="void" visibility="private"/>
        <Method name="writeString" returnType="void" visibility="public">
          <Argument type="String" name="s"/>
        </Method>
      </Methods>
    </Class>
  </ClassDiagramComponents>
  <ClassDiagramRelations>
    <HasRelation name="responseList" source="serial.Communication" target="serial.request.Response" type="Aggregation" sourceCardinality="1..1" targetCardinality="0..*" collectionType="LinkedList&lt;Response&gt;"/>
    <HasRelation name="instance" source="serial.Communication" target="serial.Communication" type="Aggregation" sourceCardinality="1..1" targetCardinality="1..1"/>
    <HasRelation name="toSentList" source="serial.Communication" target="serial.request.Request" type="Aggregation" sourceCardinality="1..1" targetCardinality="0..*" collectionType="LinkedList&lt;Request&gt;"/>
    <IsRelation name="is" source="serial.request.RequestAutoDeal" target="serial.request.Request"/>
    <UseRelation source="serial.Communication" target="serial.Serial" sourceCardinality="1..1" targetCardinality="1..1"/>
    <HasRelation name="pendingRequest" source="serial.Communication" target="serial.request.Request" type="Aggregation" sourceCardinality="1..1" targetCardinality="1..1"/>
    <HasRelation name="instance" source="serial.Serial" target="serial.Serial" type="Aggregation" sourceCardinality="1..1" targetCardinality="1..1"/>
    <UseRelation source="serial.Serial" target="serial.Serial" sourceCardinality="1..1" targetCardinality="1..1"/>
    <HasRelation name="fromSim" source="serial.Serial" target="serial.sim.SimOutputStreamBuffer" type="Aggregation" sourceCardinality="1..1" targetCardinality="1..1"/>
    <IsRelation name="is" source="serial.request.RequestInit" target="serial.request.Request"/>
    <UseRelation source="serial.request.Request" target="serial.request.Response" sourceCardinality="1..1" targetCardinality="1..1"/>
    <IsRelation name="is" source="serial.request.RequestDeal" target="serial.request.Request"/>
    <HasRelation name="toSim" source="serial.Serial" target="serial.sim.SimInputStreamBuffer" type="Aggregation" sourceCardinality="1..1" targetCardinality="1..1"/>
    <IsRelation name="is" source="serial.request.RequestShuffle" target="serial.request.Request"/>
    <UseRelation source="serial.Communication" target="serial.Communication" sourceCardinality="1..1" targetCardinality="1..1"/>
    <UseRelation source="serial.Communication" target="serial.request.Request" sourceCardinality="1..1" targetCardinality="1..1"/>
    <HasRelation name="serial" source="serial.Communication" target="serial.Serial" type="Aggregation" sourceCardinality="1..1" targetCardinality="1..1"/>
    <IsRelation name="is" source="serial.request.RequestShutdown" target="serial.request.Request"/>
  </ClassDiagramRelations>
</ClassDiagram>
